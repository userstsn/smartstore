const api = [
    {
        name:`Razer Cynosa Chroma Gaming Keyboard: Individually Backlit RGB Keys - Spill-Resistant Design - Programmable Macro Functionality - Quiet &amp; Cushioned`,
        price:`1200`,
        rating:`4`,
        image:`keyboard.png`,
        category:`gaming`,
        sname:`gaming keyboard`

    },{
        name:`Logitech G502 HERO High Performance Wired Gaming Mouse, HERO 25K Sensor, 25,600 DPI, RGB, Adjustable Weights, 11 Programmable Buttons, On-Board Memory, PC`,
        price:`900`,
        rating:`4`,
        image:`mouse.png`,
        category:`gaming`,
        sname:`gaming mouse`
    },{
        
        name:` SteelSeries QcK Gaming Surface - Medium Thick Cloth - Best Selling Mouse Pad of All Time - Peak Tracking and Stability - Black   `,
        price:`500`,
        rating:`4`,
        image:`mouse pad.png`,
        category:`gaming`,
        sname:`mouse pad`
    },{
        name:`ASUS VG248QG 24' G-Sync Gaming Monitor 165Hz 1080p 0.5ms Eye Care with DP HDMI DVI`,
        price:`30,000`,
        rating:`5`,
        image:`gaming moniter.png`,
        category:`gaming`,
        sname:`gaming moniter`
    },{
        name:`RUNMUS Gaming Headset PC`,
        price:`1500`,
        rating:`5`,
        image:`headphone.png`,
        category:`gaming`,
        sname:`gaming headphone`,
    },{
        name:`TOSOT 12,000 BTU Window Air Conditioner - Energy Star, Modern Design, and Temperature-Sensing Remote - Window AC for Bedroom, Living Room, and attics up to 550 sq. ft.`,
        price:`25,000`,
        rating:`4`,
        image:`ac.png`,
        category:`electronics`,
        sname:`Air conditioner`,
    },
    {
        name:`Honeywell Carmel 48-Inch Ceiling Fan with Integrated Light Kit and Remote Control, Five Reversible Cimarron/Ironwood Blades, Bronze`,
        price:`8,000`,
        rating:`4`,
        image:`fan.png`,
        category:`electronics`,
        sname:`Fan`,
    },{
        name:`RCA RFR835-Black 3.2 Cubc Foot 2 Door Fridge and Freezer`,
        price:`33,000`,
        rating:`5`,
        image:`fridge.png`,
        category:`electronics`,
        sname:`Fridge`,
    },{
        name:`TP-Link N450 WiFi Router - Wireless Internet Router for Home (TL-WR940N)`,
        price:`3,000`,
        rating:`4`,
        image:`router.png`,
        category:`electronics`,
        sname:`Router`,
    },{
        name:`Portable Washing Machine, 11lbs Capacity Fully Automatic Compact Washer with Wheels`,
        price:`45,000`,
        rating:`4`,
        image:`washing machine.png`,
        category:`electronics`,
        sname:`Washing machine`,
    },{
        name:`Timberland Men's 35mm Classic Jean Belt`,
        price:`800`,
        rating:`4`,
        image:`belt.png`,
        category:`fashion`,
        sname:`leather belt`,
    },{
        name:`sun set hat`,
        price:`600`,
        rating:`4`,
        image:`hat.png`,
        category:`fashion`,
        sname:`hat`,
    },{
        name:`Levi's Women's Faux Leather Belted Motorcycle Jacket`,
        price:`4,600`,
        rating:`5`,
        image:`jacket.png`,
        category:`fashion`,
        sname:`jacket`,
    },{
        name:`Dockers Men’s Vargas Leather Handsewn Boat Shoe`,
        price:`2,500`,
        rating:`4`,
        image:`shoes.png`,
        category:`fashion`,
        sname:`leather shoe`,
    },{
        name:`Men's Tiro Track Pants`,
        price:`1,900`,
        rating:`4`,
        image:`track.png`,
        category:`fashion`,
        sname:``,
    },{
        name:`Timex Men's Easy Reader Date Leather Strap Watch`,
        price:`3,580`,
        rating:`5`,
        image:`watch.png`,
        category:`fashion`,
        sname:`classic watch`,
    },{
        name:` Fogg Scent Intensio Eau de Parfum - 90 ml (For Men) `,
        price:`1700`,
        rating:`5`,
        image:`fogg.png`,
        category:`cosmetics`,
        sname:`Fogg`,
    },
    {
        name:`Head and Shoulders Shampoo, Anti Dandruff Treatment and Scalp Care, Classic Clean Scent, for All Hair Types including Color Treated, Curly or Textured Hair, 32.1 fl oz, Twin Pack`,
        price:`400`,
        rating:`4`,
        image:`shampoo.png`,
        category:`cosmetics`,
        sname:`shampoo`,
    },{
        name:`Lifebuoy Total 10- Soap Bar - 125g X 12 Bars (125g X 12 Bars)`,
        price:`30`,
        rating:`4`,
        image:`soap.png`,
        category:`cosmetics`,
        sname:`soap`,
    },{
        name:`Castor oil Argan oil Hair Carrier oil`,
        price:`350`,
        rating:`4`,
        image:`oil.png`,
        category:`cosmetics`,
        sname:`oil`,
    },
    {
        name:`Cosmetics Toiletry bag Make-up Beauty, Pink cosmetic bag`,
        price:`2,650`,
        rating:`4`,
        image:`bag.png`,
        category:`cosmetics`,
        sname:`Bag`,
    },{
        name:`Nike Mercurial Vapor Football boot Cleat Sports shoes, football shoes`,
        price:`2,200`,
        rating:`5`,
        image:`football shoes.png`,
        category:`sports`,
        sname:`Football shoes`,
    },{
        name:`American football `,
        price:`1,100`,
        rating:`4`,
        image:`football.png`,
        category:`sports`,
        sname:`Football`,
    },{
        name:`T-shirt Mockup Jersey Kit Football, kit, purple, tshirt`,
        price:`5,999`,
        rating:`5`,
        image:`football set.png`,
        category:`sports`,
        sname:`blue jersey`,
    },{
        name:`Cricket Bats Baseball Bats Bat-and-ball `,
        price:`3,999`,
        rating:`5`,
        image:`cricket.png`,
        category:`sports`,
        sname:`cricket set`,
    },{
        name:`Basketball Backboard Net graphy, Simple basketball hoop, angle`,
        price:`2,600`,
        rating:`4`,
        image:`basketball.png`,
        category:`sports`,
        sname:`basket ball`,
    },
    {
        name:`BEILUNER Luxury Rosewood Ballpoint Pen`,
        price:`800`,
        rating:`3`,
        image:`pen.png`,
        category:`stationary`,
        sname:`pen`,
    },
    {
        name:`Pocket Oxford American Dictionary & Thesaurus 3rd Edition`,
        price:`1,200`,
        rating:`4`,
        image:`book.png`,
        category:`stationary`,
        sname:`oxford dictionary`,
    },{
        name:`Beyong Leather Writing Journal, Refillable Travelers Notebook, Men & Women Leather Journals to Write in, Art Sketchbook, Travel Dairy, Best Gifts for Teens Girls and Boys (Blue, 7 Inch)`,
        price:`499`,
        rating:`3`,
        image:`dairy.png`,
        category:`stationary`,
        sname:`dairy`,
    },{
        name:`Officemate 2 Hole Punch, 30 Sheet Capacity, Black (90092)`,
        price:`6,545`,
        rating:`5`,
        image:`punch machine.png`,
        category:`stationary`,
        sname:`punch machine`,
    },{
        name:`Swingline Stapler, Half Strip Desktop Stapler, 40 Sheet Capacity, Low Force, Compact Size, Office, Desk, Optima 40, Orange/Silver/Black, 1 Count (87842)`,
        price:`459`,
        rating:`4`,
        image:`stabler.png`,
        category:`stationary`,
        sname:`stabler`,
    },
    {
        name:`OTTERBOX COMMUTER SERIES Case for iPhone 13 Pro Max & iPhone 12 Pro Max - BLACK`,
        price:`3,00,000`,
        rating:`5`,
        image:`iphonepromax.png`,
        category:`phones`,
        sname:`iphone 13 pro max`,
    },{
        name:`Redmi Note 10s | 128GB 6GB RAM | Factory Unlocked (GSM ONLY | Not Compatible with Verizon/Sprint/Boost) | International Model (Onyx Gray)`,
        price:`29,999`,
        rating:`4`,
        image:`note 10.png`,
        category:`phones`,
        sname:`redmi note 10s`,
    },{
        name:`OnePlus 8 Glacial Green,​ 5G Unlocked Android Smartphone U.S Version, 8GB RAM+128GB Storage, 90Hz Fluid Display,Triple Camera, with Alexa Built-in`,
        price:`98,499`,
        rating:`5`,
        image:`one plus.png`,
        category:`phones`,
        sname:`one plus 9 pro`,
    },{
        name:`Asus ROG Phone 5 ZS673KS / I005DA, 5G, International Version (No Warranty), Dual 128GB 12GB RAM, Tencent Games with Google Play, White - GSM Unlocked`,
        price:`3,19,999`,
        rating:`5`,
        image:`rog.png`,
        category:`phones`,
        sname:`rog phone 5`,
    },{
        name:`SAMSUNG Galaxy S21 Ultra 5G Factory Unlocked Android Cell Phone 256GB US Version Smartphone Pro-Grade Camera 8K Video 108MP High Res, Phantom Black`,
        price:`1,50,000`,
        rating:`5`,
        image:`s21 ultra.png`,
        category:`phones`,
        sname:`s21 ultra`,
    },{
        name:`Google Pixel 6 Pro - 5G Android Phone - Unlocked Smartphone with Advanced Pixel Camera and Telephoto Lens - 128GB - Stormy Black`,
        price:`2,11,099`,
        rating:`5`,
        image:`google.png`,
        category:`phones`,
        sname:`google pixel 6 pro`,
    
    },
    {
        name:`Xperia PRO-I 5G smartphone with 1-inch image sensor, triple camera array and 120Hz 6.5” 21:9 4K HDR OLED Display - XQBE62/B`,
        price:`89,399`,
        rating:`4`,
        image:`sony.png`,
        category:`phones`,
        sname:`Xperia PRO`,
    
    },
    {
        name:`2021 Apple 12.9-inch iPad Pro (Wi‑Fi, 512GB) - Space Gray`,
        price:`2,12,000`,
        rating:`5`,
        image:`ipad.png`,
        category:`phones`,
        sname:`ipad pro`,
    
    },
    {
        name:`SAMSUNG Galaxy Tab S7 11-inch Android Tablet 128GB Wi-Fi Bluetooth S Pen Fast Charging USB-C Port, Mystic Black`,
        price:`55,999`,
        rating:`4`,
        image:`s7tab.png`,
        category:`phones`,
        sname:`samsung tab s7`,
    
    },{
        name:`SAMSUNG Galaxy Z Flip 3 5G Factory Unlocked Android Cell Phone US Version Smartphone Flex Mode Intuitive Camera Compact 128GB Storage US Warranty, Phantom Black`,
        price:`2,500,000`,
        rating:`5`,
        image:`flip3.png`,
        category:`phones`,
        sname:`samsung galaxy flip 3`,
    
    },{
        name:`RITZ Peanut Butter Sandwich Cracker Snacks and Cheese Sandwich Crackers, Snack Crackers Variety Pack, 32 Snack Packs`,
        price:`400`,
        rating:`4`,
        image:`peanut.png`,
        category:`groceries`,
        sname:`peanut crackers`,
    
    },{
        name:`Lay's Potato Chip Variety Pack, 1 Ounce (Pack of 40)`,
        price:`50`,
        rating:`4`,
        image:`lays.png`,
        category:`groceries`,
        sname:`lays`,
    
    },{
        name:`Kodiak Cakes Minute Muffins, Chocolate Chip, 2.36 Ounce (Pack of 12)`,
        price:`900`,
        rating:`4`,
        image:`cakes.png`,
        category:`groceries`,
        sname:`chocolate cake`,
    
    },{
        name:`OREO Original, OREO Golden, CHIPS AHOY! & Nutter Butter Cookie Snacks Variety Pack, Holiday Christmas Cookies, 2 Count (Pack of 56)`,
        price:`480`,
        rating:`3`,
        image:`oreo.png`,
        category:`groceries`,
        sname:`oreo`,
    
    },{
        name:`Triple Scoop Ice Cream Mix, Premium Chocolate, starter for use with home ice cream maker, no artificial colors or flavors`,
        price:`1,200`,
        rating:`5`,
        image:`ice cream.png`,
        category:`groceries`,
        sname:`ice cream`,
    
    },
    {
        name:`BOILING POINT Wok Noodle Package, Healthy Asian Ramen, No Preservatives, Non-Fried Instant Noodles, Stir Fry, Value Bundle Set Includes Original BP Wok Noodles, 2.1 oz.(Pack of 5)`,
        price:`1,350`,
        rating:`3`,
        image:`noodle.png`,
        category:`groceries`,
        sname:`noodle`,
    
    },{
        name:`Authentic Royal Royal Basmati Rice, 15-Pound Bag, White`,
        price:`2,600`,
        rating:`5`,
        image:`rice.png`,
        category:`groceries`,
        sname:`rice`,
    
    },{
        name:`Kirkland Signature Nuts, Almonds, 48 Ounce`,
        price:`2,000`,
        rating:`4`,
        image:`badam.png`,
        category:`groceries`,
        sname:`badam`,
    
    },{
        name:`Snack Pack Chocolate Vanilla Pudding Cups, 4 Count, 12 Pack`,
        price:`600`,
        rating:`3`,
        image:`cup cake.png`,
        category:`groceries`,
        sname:`cup cake`,
    
    },{
        name:`Jack Link’s Beef Jerky, Teriyaki, (2) 9 Oz Bags – Flavorful Everyday Snack, 10g of Protein and 80 Calories, Made with 100% Premium Beef, Soy, Ginger and Onion - 96% Fat Free, No Added MSG`,
        price:`1,900`,
        rating:`4`,
        image:`beef jerky.png`,
        category:`groceries`,
        sname:`beef jerky`,
    
    },{
        name:`Amazon Brand – Stone & Beam Hillman Mid-Century Sofa Couch with Wood Base and Legs, 78"W, Ivory`,
        price:`40,000`,
        rating:`5`,
        image:`sofa.png`,
        category:`furniture`,
        sname:`sofa`,
    
    },{
        name:`Signature Design by Ashley Berringer Rustic Dining Chair with Cushions, 2 Count, Brown`,
        price:`4,499`,
        rating:`4`,
        image:`chair.png`,
        category:`furniture`,
        sname:`chair`,
    
    },
    {
        name:`GreenForest Dining Table 47 inch Modern Kitchen Table with Heavy Metal Legs Industrial Dinner Table for Dining Room Living Room, Walnut`,
        price:`20,399`,
        rating:`4`,
        image:`table.png`,
        category:`furniture`,
        sname:`table`,

    },{
        name:`Iyee Nature Upholstered Platform Bed Frame with Tufted Headboard, Queen Bed for Wood Slat Support/Mattress Foundation/No Box Spring`,
        price:`35,000`,
        rating:`5`, 
        image:`bed.png`,
        category:`furniture`,
        sname:`bed`,
    
    },{
        name:`FURINNO JAYA Simply Home 5-Shelf Bookcase, 5-Tier, Black`,
        price:`15,000`,
        rating:`4`,
        image:`book shelf.png`,
        category:`furniture`,
        sname:`book self`,
    
    },{
        name:`VECELO Nightstand Modern Side End SofaTable Night Stand with Bin Drawer for Living Room Bedroom, Set of 2,Industrial Metal Frame, Table, Brown`,
        price:`14,499`,
        rating:`4`,
        image:`night stand.png`,
        category:`furniture`,
        sname:`night stand`,
    
    },{
        name:`Henn&Hart Amalie Two-Tier Coffee Table, 43", Gold`,
        price:`9,199`,
        rating:`4`,
        image:`glass tabel.png`,
        category:`furniture`,
        sname:`glass table`,
    
    },{
        name:`End Table lamp for Living Room ,Bedroom ,Guest Room ,Natural Wood Color ,Metal Table Floor lamp with USB Charing Port and AC Outlet,Modern Bedside Nightstand Lighting Bulb Included`,
        price:`10699`,
        rating:`4`,
        image:`lamp tabel.png`,
        category:`furniture`,
        sname:`lamp table`,
    
    },{
        name:`Hiware 12-Piece Dinner Forks Set, Food-Grade Stainless Steel Cutlery Forks, Mirror Polished, Dishwasher Safe - 8 Inch`,
        price:`259`,
        rating:`4`,
        image:`fork.png`,
        category:`household`,
        sname:`fork`,
    
    },{
        name:`Hiware 12-Piece Dinner Spoons Set, Food Grade Stainless Steel Spoons for Home, Kitchen or Restaurant - Mirror Polished, Dishwasher Safe, 7.3 Inch`,
        price:`150`,
        rating:`4`,
        image:`spoon.png`,
        category:`household`,
        sname:`spoon`,
    
    },{
        name:`Y YHY Pasta Bowls 30oz, Large Salad Serving Bowls, White Soup Bowls, Porcelain Pasta Bowls Set of 6, Microwave Dishwasher Safe`,
        price:`4,450`,
        rating:`4`,
        image:`bowl.png`,
        category:`household`,
        sname:`bowl`,
    
    },{
        name:`6-Piece White Dinner Plate Set`,
        price:`500`,
        rating:`4`,
        image:`plate.png`,
        category:`household`,
        sname:`plate`,
    
    },{
        name:`JoyJolt Declan Coffee Mug. Glass Coffee Mugs Set of 6. Clear Glass Coffee Cups 16 Oz with Handles for Hot Beverages - Cappuccino, Latte, Big Tea Cup.`,
        price:`150`,
        rating:`4`,
        image:`cup.png`,
        category:`household`,
        sname:`cup`,
    
    },{
        name:`
        ZWILLING Classic 8-inch Professional Chef Knife, Kitchen Knife, German Knife, Black`,
        price:`399`,
        rating:`5`,
        image:`knife.png`,
        category:`household`,
        sname:`knife`,
    
    },{
        name:`U-QE Wood Cutting Board, Wood Chopping Boards for Kitchen with Deep Juice Groove, Organic Acacia Butcher Block for Meat and Vegetable, Wooden Serving Board with Grip Handles, 17x13x1''`,
        price:`900`,
        rating:`4`,
        image:`chopping board.png`,
        category:`household`,
        sname:`chopping board`,
    
    },
]

const checkoutBtn = document.querySelector(".checkout");
const checkoutSection = document.querySelector(".checkout-section");
const checkoutSectionBg = document.querySelector(".checkout-section-bg");
const checkoutProduct = document.querySelector(".checkout-section .checkout-products");
const checkoutProductPrice = document.querySelector(".checkout-section .checkout-pay .price");
const onlinePay = document.querySelector("#op");
const opTypes = document.querySelector(".optypes");
const ordernowbtn = document.querySelector(".checkout-section .buy-btn");
const checkoutdiv = document.querySelector(".checkout-products");




// show op types on selsction of onlline payment

// if(onlinePay.check)

function payMethodChange(){
    if(onlinePay.checked){
        opTypes.style.display = "flex";
        ordernowbtn.style.display = "none";
    }else{
        opTypes.style.display = "none";
        ordernowbtn.style.display = "block";


    }

}


checkoutBtn.addEventListener("click",(e) =>{
    checkoutProduct.innerHTML = "";
    loadCheckoutProduct();
 
    checkoutSection.classList.add("shown");
checkoutSectionBg.style.display = "block";

})



const product =  document.querySelector(".categories.product");
const cart_count = document.querySelector(".nav .num");

cart_count.innerHTML =localStorage.getItem("cart") ? localStorage.getItem("cart").split(",").length : 0;






for (data of api.sort(function() { return 0.5 - Math.random() })){
    
    product.innerHTML += `
    <div class="card"  data-category="${data.category}">
            <div class="img-bg">
                <img src="./pic/img/${data.category}/${data.image}" alt="">
            </div>
            <div class="details">
                <p class="name">${data.name.substring(0, 100)}</p>
                <p class="rating"> ${"★".repeat(data.rating)}${"☆".repeat(5 - data.rating)} </p>
                <p class="price">Rs ${data.price}</p>
                <button data-sname="${data.sname.replace(/\s+/g,"-")}" class="cart">
                    Add to cart &nbsp;&nbsp;
                    <i class="fa fa-shopping-cart"></i>
                </button>
            </div>
        </div>
`
}

function loadProductCount(){
    cart_count.innerHTML = localStorage.getItem("cart") ? localStorage.getItem("cart").split(",").length + 1 : ++cart_count.innerHTML;

}

document.querySelectorAll(".card .cart").forEach((btn) =>{
    btn.addEventListener("click",(e) =>{

        
loadProductCount();

        let btn;
        if(e.path[0].classList.contains("cart") ){
            btn = e.path[0];
        }else if(e.path[1].classList.contains("cart")){
            btn = e.path[1];
        }else{
            btn = e.path[2];
        }

        let id = btn.dataset["sname"].replace(/-/g, ' ');

        let prevItems = localStorage.getItem("cart");

        prevItems ? localStorage.setItem("cart", [prevItems, id]) : localStorage.setItem("cart", [id])


    })
})




//for checkout page

document.body.addEventListener('click', function(e){
    if(e.target.classList.contains("checkout-section-bg")){
// checkoutSectionBg.style.transition = "0";

        checkoutSection.classList.remove("shown");
checkoutSectionBg.style.display = "none";

    }
    });




function getItemFromLs(){
    let totalCheckoutPrice = 0;

    let dataArr = [];
    const item = localStorage.getItem("cart") ? localStorage.getItem("cart").split(",") : [];

    api.forEach((data) =>{
        item.forEach((pr) => {

            if(data.sname == pr){
                dataArr.push(data);
                totalCheckoutPrice += parseInt(data.price.replace(/,/g,""));
            }
        })
    })
    return [dataArr, totalCheckoutPrice];

}




function loadCheckoutProduct(){
const [checkoutProductData, total_price] = getItemFromLs()

checkoutProductData.forEach((data) =>{

    checkoutProduct.innerHTML += `
<div class="card">
<div class="cross" id="${data.sname}" onclick="crossBtnClick(this.id)">
&times;
</div>
        <div class="img-bg">
            <img src="./pic/img/${data.category}/${data.image}" alt="">
        </div>
        <div class="details">
            <p class="name">${data.name.substring(0, 100)}</p>
            <p class="price">Rs ${data.price}</p>
        </div>
    </div>
`;


checkoutProductPrice.innerHTML = localStorage.getItem("cart").length > 0 ? total_price : 0;


})
}
loadCheckoutProduct()



function crossBtnClick(sname){
    const items = localStorage.getItem("cart").split(",");



    items.splice(items.indexOf(sname), 1);
    localStorage.setItem("cart", items);

    checkoutProduct.innerHTML = "";
    loadCheckoutProduct();
cart_count.innerHTML = localStorage.getItem("cart") ? localStorage.getItem("cart").split(",").length : 0;

// checkoutProductPrice.innerHTML = localStorage.getItem("cart").length > 0 ? total_price : 0;


if (Array.from(checkoutdiv.children).length == 0) {
    checkoutProductPrice.innerHTML = 0;
}

}

function categoryChange(value) {
    const productCards = document.querySelectorAll(".categories.product .card");
productCards.forEach((card)=>{
    const category = card.dataset["category"];
    if(value == "All"){
        card.style.display="block"
    }else{
        if(category !== value){
            card.style.display="none"
        }else{
            card.style.display="block"
        }
}
})

}
function getQuery(){
    const url = window.location.href;
    const query = url.split("?");
    const value=query[query.length - 1];
    return value;
    
}

//Get select object
var objSelect = document.querySelector("#categories");

//Set selected
setSelectedValue(objSelect, getQuery());

function setSelectedValue(selectObj, valueToSet) {
    for (var i = 0; i < selectObj.options.length; i++) {
        if (selectObj.options[i].text== valueToSet) {
            selectObj.options[i].selected = true;
            categoryChange(getQuery())
        }
    }
}


function searchQuery(value){
    const productCards = document.querySelectorAll(".categories.product .card");
    
    productCards.forEach((card) => {
        const name = card.querySelector(".name").innerText.toLowerCase();

        if(name.split(value).length <= 1){
            card.style.display="none";
        }else{
            card.style.display = "block";
        }

    })

}


function orderBtnPress(){
    const sname = localStorage.getItem("cart").split(",");
    let s = sname.filter(function(item, pos) {
       return sname.indexOf(item) == pos;
    });


    alert(`The following items will be delivered to you soon\nTotal Price: Rs ${checkoutProductPrice.innerText}\n\n${s.join("\n")}`)

}


window.addEventListener('load', function () {
    document.body.style.opacity = "1";
  })




